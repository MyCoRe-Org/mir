<?xml version="1.0" encoding="UTF-8"?>
<MyCoReWebPage>
  <section title="Komplexe Suche über alle Publikationen" xml:lang="de" />

  <section title="Complex search mask for all publications" xml:lang="en" />

  <section xml:lang="all">
    <editor id="searchmask" class="editor pull-left">
      <source uri="searchInput:{id}" />
      <target type="servlet" name="MCRLegacySearchServlet" method="post" format="xml" />

      <components root="root" var="/query">
        <panel id="root">
          <hidden var="@mask" default="content/main/search/complex_intern.xml" />

          <hidden var="conditions/@format" default="xml" />
          <hidden var="conditions/boolean/@operator" default="and" />
      <!-- Search only for object type mods -->
          <hidden var="conditions/boolean/condition1/@field" default="objectType" />
          <hidden var="conditions/boolean/condition1/@operator" default="=" />
          <hidden var="conditions/boolean/condition1/@value" default="mods" />
          <hidden var="@maxResults" default="0" />
          <hidden var="@numPerPage" default="20" />

          <cell row="1" colspan="3" anchor="NORTHWEST" class="editorSubHeadlines">
            <text i18n="component.mods.editor.search.label" />
          </cell>

      <!-- Search in metadata fields that are text -->
          <cell row="5" col="1" colspan="3" var="conditions/boolean/boolean/boolean">
            <repeater min="1" max="10" arrows="false" style="margin-top:5px;">
              <panel style="border:1px dashed #0B478B;">
                <hidden var="@operator" default="and" />
                <cell row="1" col="1" colspan="3" anchor="NORTHWEST" var="condition">
                  <repeater min="1" max="10" arrows="false">
                    <panel>
                      <cell row="1" col="1" style="width:130px;" anchor="NORTHEAST" var="@field">
                        <list type="dropdown" default="title" width="90px">
                          <item value="mods.title" i18n="editor.search.mir.title" />
                          <item value="mods.author" i18n="editor.search.mir.author" />
                          <item value="mods.name" i18n="editor.search.mir.name" />
                          <item value="allMeta" i18n="editor.search.mir.metadata" />
                        </list>
                      </cell>
                      <cell row="1" col="2" anchor="WEST" var="@operator" ref="list.operators.text" />
                      <cell row="1" col="3" anchor="WEST" var="@value">
                        <textfield width="40" />
                      </cell>
                    </panel>
                  </repeater>
                </cell>
            <!-- Search in field "id,isbn,mods.identifier" with operator "=" -->
                <hidden var="condition5/@field" default="id,isbn,mods.identifier" />
                <hidden var="condition5/@operator" default="=" />
                <cell row="5" col="1" style="width:130px;" anchor="NORTHEAST">
                  <text i18n="editor.search.mir.identifier" />
                </cell>
                <cell row="5" col="2" colspan="2" var="condition5/@value">
                   <textfield width="40" />
                </cell>
            <!-- Search in field "category/institutes" with operator "=" -->
                <hidden var="condition10/@field" default="category" />
                <hidden var="condition10/@operator" default="=" />
                <cell row="10" col="1" anchor="NORTHEAST">
                  <text i18n="editor.search.mir.institute" />
                </cell>
                <cell row="10" col="2" colspan="2" var="condition10/@value">
                  <list style="width:450px;" type="dropdown">
                    <item value="">
                      <label xml:lang="de">(bitte wählen)</label>
                      <label xml:lang="en">(please select)</label>
                    </item>
                    <include uri="classification:editorComplete:-1:children:mir_institutes" cacheable="false" />
                  </list>
                </cell>
            <!-- Search in field "category/sdnb" with operator "=" -->
                <hidden var="condition20/@field" default="category" />
                <hidden var="condition20/@operator" default="=" />
                <cell row="20" col="1" anchor="NORTHEAST">
                  <text i18n="editor.search.mir.sdnb" />
                </cell>
                <cell row="20" col="2" colspan="2" var="condition20/@value">
                  <list width="30" type="dropdown">
                    <item value="">
                      <label xml:lang="de">(bitte wählen)</label>
                      <label xml:lang="en">(please select)</label>
                    </item>
                    <include uri="classification:editorComplete:-1:children:SDNB" cacheable="true" />
                  </list>
                </cell>
            <!-- Search in field "category/genre" with operator "=" -->
                <hidden var="condition30/@field" default="category" />
                <hidden var="condition30/@operator" default="=" />
                <cell row="30" col="1" anchor="NORTHEAST">
                  <text i18n="editor.search.mir.genre" />
                </cell>
                <cell row="30" col="2" colspan="2" var="condition30/@value">
                  <list width="30" type="dropdown">
                    <item value="">
                      <label xml:lang="de">(bitte wählen)</label>
                      <label xml:lang="en">(please select)</label>
                    </item>
                    <include uri="classification:editorComplete:-1:children:mir_genres" cacheable="true" />
                  </list>
                </cell>
            <!-- Search in field "dateIssued" -->
                <hidden var="condition40/@field" default="mods.dateIssued" />
                <cell row="40" col="1" anchor="NORTHEAST">
                  <text i18n="component.mods.metaData.dictionary.dateIssued"/>
                </cell>
                <cell row="40" col="2" style="width:40px;" anchor="WEST" var="condition40/@operator" ref="list.operators" />
                <cell row="40" col="3" anchor="WEST" var="condition40/@value">
                    <textfield width="15" />
                </cell>

            <!-- search in field Impact Factor -->
                <hidden var="condition50/@field" default="impactFactor" />
                <cell row="50" col="1" anchor="NORTHEAST">
                  <text i18n="editor.search.mir.impactFactor" />
                </cell>
                <cell row="50" col="2" style="width:40px;" anchor="WEST" var="condition50/@operator" ref="list.operators" />
                <cell row="50" col="3" anchor="WEST" var="condition50/@value">
                  <textfield width="15" />
                </cell>

            <!-- Search in field "hasFiles" -->
                <hidden var="condition60/@field" default="hasFiles" />
                <hidden var="condition60/@operator" default="=" />
                <cell row="60" col="1" anchor="NORTHEAST">
                  <text i18n="editor.search.mir.hasFiles"/>
                </cell>
                <cell row="60" col="2" colspan="2" anchor="WEST" var="condition60/@value">
                  <checkbox value="true" checked="false" />
                </cell>
            <!-- search in field publication status -->
                <hidden var="condition70/@field" default="category" />
                <hidden var="condition70/@operator" default="=" />
                <cell row="70" col="1" anchor="NORTHEAST">
                  <text i18n="component.mods.metaData.dictionary.status" />
                </cell>
                <cell row="70" col="2" colspan="2" var="condition70/@value">
                  <list width="60" type="dropdown">
                    <item value="">
                      <label xml:lang="de">(bitte wählen)</label>
                      <label xml:lang="en">(please select)</label>
                    </item>
                    <include uri="classification:editorComplete:-1:children:mir_status" cacheable="true" />
                  </list>
                </cell>

              </panel>
            </repeater>
          </cell>
          
          <cell row="10" col="1" colspan="3" anchor="SOUTHEAST">
            <panel>
              <cell row="1" col="1" anchor="WEST">
                <text i18n="editor.search.connect" />
              </cell>
              <cell row="1" col="2" anchor="EAST" var="conditions/boolean/boolean/@operator">
                <list type="dropdown" default="and">
                  <item value="and" i18n="editor.search.and" />
                  <item value="or" i18n="editor.search.or" />
                </list>
              </cell>
            </panel>
          </cell>

          <cell row="19" col="1" anchor="NORTHEAST">
            <text i18n="editor.search.sortby" />
          </cell>
          <cell row="19" col="2" colspan="2" anchor="NORTHWEST" var="sortBy/field">
            <repeater min="1" max="3">
              <panel>
                <cell row="1" col="1" anchor="WEST" var="@name">
                  <list type="dropdown">
                    <item value="" i18n="editor.search.choose" />
                    <item value="mods.dateIssued" i18n="component.mods.metaData.dictionary.dateIssued" />
                    <item value="score" i18n="editor.search.score" />
                  </list>
                </cell>
                <cell row="1" col="2" anchor="WEST" var="@order">
                  <list type="dropdown" default="ascending">
                    <item value="ascending" i18n="editor.search.ascending" />
                    <item value="descending" i18n="editor.search.descending" />
                  </list>
                </cell>
              </panel>
            </repeater>
          </cell>

          <cell row="22" col="1" colspan="3" anchor="EAST">
            <submitButton i18n="editor.search.search" class="btn btn-primary" />
          </cell>
        </panel>

        <list type="dropdown" id="list.operators.text" default="contains">
          <item value="contains" i18n="editor.search.contains" />
          <item value="like" i18n="editor.search.like" />
          <item value="phrase" i18n="editor.search.phrase"/>
          <item value="="     label="="     />
          <item value="&gt;"  label="&gt;"  />
          <item value="&gt;=" label="&gt;=" />
          <item value="&lt;"  label="&lt;"  />
          <item value="&lt;=" label="&lt;=" />
        </list>

        <list type="dropdown" id="list.operators" default="=">
          <item value="="     label="="     />
          <item value="&gt;"  label="&gt;"  />
          <item value="&gt;=" label="&gt;=" />
          <item value="&lt;"  label="&lt;"  />
          <item value="&lt;=" label="&lt;=" />
        </list>

      </components>
    </editor>
  </section>

  <section xml:lang="de">
    <div class="pull-right col-md-4 sidebox">
      <h2>Hinweis</h2>
      <p>
        Mehr Möglichkeiten gibt es bei der komplexen Suche, bei der Sie die Suchmaske nach Ihren Vorstellungen
        erweitern sowie als logische Verknüpfung der Suchfelder auch das 'ODER' verwenden können.
      </p>
      <p>
        Als Ergebnis erhalten Sie eine Liste aller zu Ihren Suchbegriffen passenden Treffer.
        Angezeigt werden Titel, Autor, Dokumenttyp und das letzte Bearbeitungsdatum.
        Ist etwas dabei, das Ihren Vorstellungen entspricht bekommen Sie mit einem Klick auf das passende Dokument
        die Detailansicht (Metadaten) dieses Treffers angezeigt. Sofern zu diesem Datensatz angehängte Dokumente
        vorhanden sind, können Sie die hier auswählen und anzeigen lassen.
      </p>
      <p>
        Bitte beachten Sie, dass diese Datenbank noch aufgebaut wird und nicht bei allen Suchergebnissen
        Volltexte oder sonstige angehängte Dateien vorhanden sind.
      </p>
    </div>
  </section>
</MyCoReWebPage>
